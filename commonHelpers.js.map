{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.submitForm');\nconst input = document.querySelector('.submitInput');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst MY_KEY = '41590527-3cc425bd48b0e10304cc9b3d1';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nform.addEventListener('submit', onSearch);\nloader.style.display = 'none';\n\nfunction onSearch(event) {\n  event.preventDefault();\n\n  let name = input.value;\n\n  gallery.innerHTML = '';\n\n  loader.style.display = 'block';\n\n  if (name === '') {\n    loader.style.display = 'none';\n\n    iziToast.error({\n      title: 'Error',\n      timeout: '2000',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const searchParams = new URLSearchParams({\n    key: MY_KEY,\n    q: name,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  fetch(`${BASE_URL}?${searchParams}`)\n    .then(response => {\n      loader.style.display = 'none';\n      if (!response.ok) {\n        throw new Error('Request is not ok');\n      }\n\n      return response.json();\n    })\n    .then(photos => {\n      if (photos.hits.length === 0) {\n        loader.style.display = 'none';\n\n        iziToast.error({\n          title: 'Error',\n          timeout: '2000',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: '#FAFAFB',\n          backgroundColor: '#EF4040',\n          position: 'topRight',\n        });\n        return;\n      }\n\n      gallery.innerHTML = renderPhoto(photos.hits);\n      const refreshPage = new SimpleLightbox('.gallery a', {\n        nav: true,\n        captionDelay: 250,\n        captionsData: 'alt',\n        close: true,\n        enableKeyboard: true,\n        docClose: true,\n      });\n      refreshPage.refresh();\n    })\n    .catch(error =>\n      iziToast.error({\n        title: 'Error',\n        timeout: '2000',\n        message: error,\n        messageColor: '#FAFAFB',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n      })\n    );\n}\n\nfunction renderPhoto(photos) {\n  return photos.reduce(\n    (\n      html,\n      { webformatURL, largeImageURL, tags, likes, views, comments, downloads }\n    ) =>\n      html +\n      ` <li class=\"gallery-item\">\n              \n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                  <img\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  width=\"360\"\n                  />\n              </a>    \n          <div class=\"thumb-block\">\n            <div class=\"block\">\n              <h2 class=\"tittle\">Likes</h2>\n              <p class=\"amount\">${likes}</p>\n            </div>\n            <div class=\"block\">\n              <h2 class=\"tittle\">Views</h2>\n              <p class=\"amount\">${views}</p>\n            </div>\n            <div class=\"block\">\n              <h2 class=\"tittle\">Comments</h2>\n              <p class=\"amount\">${comments}</p>\n            </div>\n            <div class=\"block\">\n              <h2 class=\"tittle\">Downloads</h2>\n              <p class=\"amount\">${downloads}</p>\n            </div>\n          </div>              \n       </li>`,\n    ''\n  );\n}\n"],"names":["form","input","gallery","loader","MY_KEY","BASE_URL","onSearch","event","name","iziToast","searchParams","response","photos","renderPhoto","SimpleLightbox","error","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAS,qCACTC,EAAW,2BAEjBL,EAAK,iBAAiB,SAAUM,CAAQ,EACxCH,EAAO,MAAM,QAAU,OAEvB,SAASG,EAASC,EAAO,CACvBA,EAAM,eAAc,EAEpB,IAAIC,EAAOP,EAAM,MAMjB,GAJAC,EAAQ,UAAY,GAEpBC,EAAO,MAAM,QAAU,QAEnBK,IAAS,GAAI,CACfL,EAAO,MAAM,QAAU,OAEvBM,EAAS,MAAM,CACb,MAAO,QACP,QAAS,OACT,QACE,2EACF,aAAc,UACd,gBAAiB,UACjB,SAAU,UAChB,CAAK,EACD,MACD,CAED,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKN,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,MAAM,GAAGH,KAAYK,GAAc,EAChC,KAAKC,GAAY,CAEhB,GADAR,EAAO,MAAM,QAAU,OACnB,CAACQ,EAAS,GACZ,MAAM,IAAI,MAAM,mBAAmB,EAGrC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAU,CACd,GAAIA,EAAO,KAAK,SAAW,EAAG,CAC5BT,EAAO,MAAM,QAAU,OAEvBM,EAAS,MAAM,CACb,MAAO,QACP,QAAS,OACT,QACE,2EACF,aAAc,UACd,gBAAiB,UACjB,SAAU,UACpB,CAAS,EACD,MACD,CAEDP,EAAQ,UAAYW,EAAYD,EAAO,IAAI,EACvB,IAAIE,EAAe,aAAc,CACnD,IAAK,GACL,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EAClB,CAAO,EACW,QAAO,CACzB,CAAK,EACA,MAAMC,GACLN,EAAS,MAAM,CACb,MAAO,QACP,QAAS,OACT,QAASM,EACT,aAAc,UACd,gBAAiB,UACjB,SAAU,UAClB,CAAO,CACP,CACA,CAEA,SAASF,EAAYD,EAAQ,CAC3B,OAAOA,EAAO,OACZ,CACEI,EACA,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAExEP,EACA;AAAA;AAAA,8CAEwCE;AAAA;AAAA,yBAErBD;AAAA,yBACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAOSC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA,cAI9B,EACJ,CACA"}